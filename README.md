# App Mail - メールクライアント

AngularとElectronで構築されたメールクライアントアプリケーションです。

## 機能

### メール管理
- 複数のメールアカウントをサポート
- IMAP/SMTP設定によるメール受信・送信
- メールリストと本文の表示（左右分割ビュー）
- メールの作成・送信
- メールの削除
- メールリストのフィルター機能（件名・送信者で検索）

### フォルダー機能
- フォルダー機能（Inbox、Drafts、Sent、Junk、Trashなど）
- フォルダーの並び替え（ドラッグ&ドロップ対応）
- フォルダー順序の保存

### UI機能
- メールリストパネルのリサイズ機能
- メール本文の表示最適化（Macのメールクライアント風の表示）
- 送信者名の表示改善（ダブルクオートとメールアドレスの自動削除）

## セットアップ

### 必要な環境

- Node.js (v18以上)
- npm

### インストール

```bash
npm install
```

## 開発

### Angular開発サーバーを起動

```bash
npm start
```

ブラウザで `http://localhost:4200` にアクセス

### Electronアプリとして起動

```bash
npm run electron-dev
```

## ビルド

### プロダクションビルド

```bash
npm run build
```

### Electronアプリのビルド

```bash
npm run dist
```

## 使用方法

### アカウント設定
1. アプリを起動後、設定画面（歯車アイコン）でメールアカウントを追加
2. アカウント名、メールアドレス、IMAP/SMTPの設定を入力
3. 設定を保存

### メールの閲覧
1. メイン画面でアカウントを選択
2. フォルダーを選択してメールを表示
3. メールリストからメールを選択して本文を確認
4. メールリストパネルの右端をドラッグして幅を調整可能

### メールの操作
- **メール作成**: 「作成」ボタンをクリックして新規メールを作成・送信
- **メール削除**: メール本文の右上の「削除」ボタンでメールを削除
- **メール検索**: メールリスト上部の検索ボックスで件名・送信者を検索
- **フォルダー並び替え**: フォルダーリストのドラッグハンドルをドラッグして順序を変更

## 技術スタック

- **フロントエンド**: Angular 20, Angular Material
- **バックエンド**: Electron, Node.js
- **メール処理**: IMAP (imap), SMTP (nodemailer), メールパーサー (mailparser)

## プロジェクト構造

```
app-mail/
├── electron/          # Electronメインプロセス
│   ├── main.js       # メインエントリーポイント（IPC通信、メール処理）
│   └── preload.js    # プリロードスクリプト（API公開）
├── src/
│   └── app/
│       ├── components/    # Angularコンポーネント
│       │   ├── mail-view/           # メール表示コンポーネント
│       │   ├── settings/            # 設定コンポーネント
│       │   ├── account-edit-dialog/ # アカウント編集ダイアログ
│       │   └── compose-email-dialog/ # メール作成ダイアログ
│       ├── services/      # サービス
│       │   ├── account.service.ts   # アカウント管理
│       │   └── mail.service.ts      # メール操作
│       └── models/        # データモデル
└── public/           # 静的ファイル
```

## データ保存

アカウント情報は以下の場所に保存されます：
- macOS: `~/Library/Application Support/app-mail/accounts.json`
- Windows: `%APPDATA%/app-mail/accounts.json`
- Linux: `~/.config/app-mail/accounts.json`

**注意**: アカウント情報（パスワードを含む）は平文で保存されます。本番環境での使用時は、暗号化の実装を検討してください。

## セキュリティに関する注意事項

### GitHubにアップロードする前に

このプロジェクトをGitHubにアップロードする前に、以下を確認してください：

1. ✅ **アカウント情報ファイルの除外**: `.gitignore`に`accounts.json`が含まれていることを確認（既に追加済み）
2. ✅ **ハードコードされた認証情報**: コード内にパスワードやAPIキーがハードコードされていないことを確認
3. ⚠️ **パスワードの保存**: 現在、パスワードは平文で保存されています。公開リポジトリにアップロードする場合は、この点をREADMEに明記することを推奨します

### 推奨事項

- 本番環境では、パスワードの暗号化を実装することを強く推奨します
- 環境変数やOSのキーチェーンサービスを使用して認証情報を管理することを検討してください

## ライセンス

MIT

